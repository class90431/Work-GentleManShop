{"remainingRequest":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/babel-loader/lib/index.js!/Users/heather/Desktop/Harden/work-ecshop/node_modules/eslint-loader/index.js??ref--13-0!/Users/heather/Desktop/Harden/work-ecshop/src/store/cartsModules.js","dependencies":[{"path":"/Users/heather/Desktop/Harden/work-ecshop/src/store/cartsModules.js","mtime":1560998682000},{"path":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nexport default {\n  // state 屬於模組區域變數\n  // actions, mutations, getters 屬於全域變數\n  strict: true,\n  state: {\n    cart: {\n      carts: []\n    }\n  },\n  actions: {\n    // 操作行為\n    getCart: function getCart(context) {\n      var _this = this;\n\n      var api = \"\".concat(process.env.VUE_APP_API_PATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMER_PATH, \"/cart\");\n      context.commit('LOADING', true);\n      axios.get(api).then(function (response) {\n        // console.log(response)\n        context.commit('LOADING', false);\n        context.commit('CART', response.data.data);\n        console.log('response.data.data', response.data.data);\n        console.log('cart', _this.state.cartsModules.cart); // console.log('1', this.state.cart.final_total)\n        // console.log('2', this.state.cart.total)\n        // console.log('3', this.state.cart.carts)\n        // vm.carts.total = response.data.data.total\n        // vm.carts.finaltotal = response.data.data.final_total\n        // console.log(vm.carts, vm.carts.total, vm.carts.finaltotal)\n      });\n    },\n    removeCartItem: function removeCartItem(context, _ref) {\n      var id = _ref.id,\n          vm = _ref.vm;\n      // console.log(id)\n      context.commit('LOADING', true);\n      var api = \"\".concat(process.env.VUE_APP_API_PATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMER_PATH, \"/cart/\").concat(id);\n      axios.delete(api).then(function (response) {\n        console.log(response.data);\n        context.commit('LOADING', false);\n        vm.$bus.$emit('messsage:push', response.data.message, 'info'); // 刪除購物車品項\n        // vm.getCart()\n\n        context.dispatch('getCart');\n      });\n    },\n    addtoCart: function addtoCart(context, _ref2) {\n      var id = _ref2.id,\n          size = _ref2.size,\n          qty = _ref2.qty,\n          vm = _ref2.vm;\n      // console.log(id, size, qty, vm)\n      var api = \"\".concat(process.env.VUE_APP_API_PATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMER_PATH, \"/cart\");\n      context.commit('LOADING', true);\n      var cart = {\n        product_id: id,\n        size: size,\n        qty: qty\n      };\n      axios.post(api, {\n        data: cart\n      }).then(function (response) {\n        console.log(response.data);\n        context.commit('LOADING', false); // console.log('bus????????????', vm)\n\n        vm.$bus.$emit('messsage:push', response.data.message, 'success'); // vm.getCart()\n\n        context.dispatch('getCart');\n      });\n    }\n  },\n  mutations: {\n    // 操作資料狀態；非同步行為'一定'要在 actions 完成，不可在 mutations 執行。\n    CART: function CART(state, payload) {\n      state.cart = payload; // state.cart.final_total = payload.final_total\n      // state.cart.total = payload.total\n    }\n  },\n  getters: {\n    // cart: state => state.cart.carts\n    cart: function cart(state) {\n      return state.cart;\n    }\n  }\n};",{"version":3,"sources":["/Users/heather/Desktop/Harden/work-ecshop/src/store/cartsModules.js"],"names":["axios","strict","state","cart","carts","actions","getCart","context","api","process","env","VUE_APP_API_PATH","VUE_APP_CUSTOMER_PATH","commit","get","then","response","data","console","log","cartsModules","removeCartItem","id","vm","delete","$bus","$emit","message","dispatch","addtoCart","size","qty","product_id","post","mutations","CART","payload","getters"],"mappings":"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","sourcesContent":["import axios from 'axios'\n\nexport default ({\n  // state 屬於模組區域變數\n  // actions, mutations, getters 屬於全域變數\n  strict: true,\n  state: {\n    cart: {\n      carts: []\n    }\n  },\n  actions: { // 操作行為\n    getCart (context) {\n      const api = `${process.env.VUE_APP_API_PATH}/api/${process.env.VUE_APP_CUSTOMER_PATH}/cart`\n      context.commit('LOADING', true)\n      axios.get(api).then((response) => {\n        // console.log(response)\n        context.commit('LOADING', false)\n        context.commit('CART', response.data.data)\n        console.log('response.data.data', response.data.data)\n        console.log('cart', this.state.cartsModules.cart)\n        // console.log('1', this.state.cart.final_total)\n        // console.log('2', this.state.cart.total)\n        // console.log('3', this.state.cart.carts)\n        // vm.carts.total = response.data.data.total\n        // vm.carts.finaltotal = response.data.data.final_total\n        // console.log(vm.carts, vm.carts.total, vm.carts.finaltotal)\n      })\n    },\n    removeCartItem (context, { id, vm }) {\n      // console.log(id)\n      context.commit('LOADING', true)\n      const api = `${process.env.VUE_APP_API_PATH}/api/${process.env.VUE_APP_CUSTOMER_PATH}/cart/${id}`\n      axios.delete(api).then((response) => {\n        console.log(response.data)\n        context.commit('LOADING', false)\n        vm.$bus.$emit('messsage:push', response.data.message, 'info') // 刪除購物車品項\n        // vm.getCart()\n        context.dispatch('getCart')\n      })\n    },\n    addtoCart (context, { id, size, qty, vm }) {\n      // console.log(id, size, qty, vm)\n      const api = `${process.env.VUE_APP_API_PATH}/api/${process.env.VUE_APP_CUSTOMER_PATH}/cart`\n      context.commit('LOADING', true)\n      const cart = {\n        product_id: id,\n        size,\n        qty\n      }\n      axios.post(api, { data: cart }).then((response) => {\n        console.log(response.data)\n        context.commit('LOADING', false)\n        // console.log('bus????????????', vm)\n        vm.$bus.$emit('messsage:push', response.data.message, 'success')\n        // vm.getCart()\n        context.dispatch('getCart')\n      })\n    }\n  },\n  mutations: { // 操作資料狀態；非同步行為'一定'要在 actions 完成，不可在 mutations 執行。\n    CART (state, payload) {\n      state.cart = payload\n      // state.cart.final_total = payload.final_total\n      // state.cart.total = payload.total\n    }\n  },\n  getters: {\n    // cart: state => state.cart.carts\n    cart: state => state.cart\n  }\n})\n"]}]}