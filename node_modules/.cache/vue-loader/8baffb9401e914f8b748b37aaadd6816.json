{"remainingRequest":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/heather/Desktop/Harden/work-ecshop/src/views/Checkout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/heather/Desktop/Harden/work-ecshop/src/views/Checkout.vue","mtime":1560147620000},{"path":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/heather/Desktop/Harden/work-ecshop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data () {\n    return {\n      orderId: '',\n      order: {\n        user: {}\n      }\n    }\n  },\n  methods: {\n    getOrder () {\n      const vm = this\n      const url = `${process.env.VUE_APP_API_PATH}/api/${process.env.VUE_APP_CUSTOMER_PATH}/order/${vm.orderId}`\n      vm.isLoading = true\n      this.$http.get(url).then((response) => {\n        console.log(response)\n        vm.isLoading = false\n        vm.order = response.data.order\n        console.log(vm.order)\n      })\n    },\n    payOrder () {\n      const vm = this\n      const url = `${process.env.VUE_APP_API_PATH}/api/${process.env.VUE_APP_CUSTOMER_PATH}/pay/${vm.orderId}`\n      vm.isLoading = true\n      this.$http.post(url).then((response) => {\n        console.log(response)\n        if (response.data.success) {\n          vm.getOrder()\n        }\n        vm.isLoading = false\n      })\n    }\n  },\n  created () {\n    this.orderId = this.$route.params.orderId\n    console.log(this.orderId)\n    this.getOrder()\n  }\n}\n\n",{"version":3,"sources":["Checkout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Checkout.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"checkout\">\n    <div class=\"my-5 row justify-content-center\">\n      <form class=\"col-md-6\" @submit=\"payOrder\">\n        <table class=\"table\">\n          <thead>\n            <th class=\"text-left\">品名</th>\n            <th>數量</th>\n            <th>尺寸</th>\n            <th>單價</th>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in order.products\" :key=\"item.id\">\n              <td class=\"align-middle text-left\">{{ item.product.title }}</td>\n              <td class=\"align-middle\">{{ item.qty }}/{{ item.product.unit }}</td>\n              <td>{{ item.size }}</td>\n              <td class=\"align-middle text-right\">{{ item.final_total | integer }}</td>\n            </tr>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan=\"3\" class=\"text-right h5\">總計</td>\n              <td class=\"text-right h5\">{{ order.total | integer }}</td>\n            </tr>\n          </tfoot>\n        </table>\n\n        <table class=\"table mt-5\">\n          <tbody>\n            <tr>\n              <th width=\"200\" class=\"text-left\">Email</th>\n              <td class=\"text-left\">{{ order.user.email }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-left\">姓名</th>\n              <td class=\"text-left\">{{ order.user.name }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-left\">收件人電話</th>\n              <td class=\"text-left\">{{ order.user.tel }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-left\">收件人地址</th>\n              <td class=\"text-left\">{{ order.user.address }}</td>\n            </tr>\n            <tr>\n              <th class=\"text-left\">付款狀態</th>\n              <td class=\"text-left\">\n                <span v-if=\"!order.is_paid\">尚未付款</span>\n                <span v-else class=\"text-success\">付款完成</span>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"text-right\" v-if=\"order.is_paid === false\">\n          <button class=\"btn btn-danger\">確認付款去</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      orderId: '',\n      order: {\n        user: {}\n      }\n    }\n  },\n  methods: {\n    getOrder () {\n      const vm = this\n      const url = `${process.env.VUE_APP_API_PATH}/api/${process.env.VUE_APP_CUSTOMER_PATH}/order/${vm.orderId}`\n      vm.isLoading = true\n      this.$http.get(url).then((response) => {\n        console.log(response)\n        vm.isLoading = false\n        vm.order = response.data.order\n        console.log(vm.order)\n      })\n    },\n    payOrder () {\n      const vm = this\n      const url = `${process.env.VUE_APP_API_PATH}/api/${process.env.VUE_APP_CUSTOMER_PATH}/pay/${vm.orderId}`\n      vm.isLoading = true\n      this.$http.post(url).then((response) => {\n        console.log(response)\n        if (response.data.success) {\n          vm.getOrder()\n        }\n        vm.isLoading = false\n      })\n    }\n  },\n  created () {\n    this.orderId = this.$route.params.orderId\n    console.log(this.orderId)\n    this.getOrder()\n  }\n}\n\n</script>\n<style lang=\"scss\" scoped>\n</style>\n"]}]}